Based on [archie](https://github.com/athul/archie), but make several changes
